(this["webpackJsonptenants-react-web-client"]=this["webpackJsonptenants-react-web-client"]||[]).push([[0],{19:function(e,t,a){"use strict";a.r(t);var n,s,c,l,i=a(1),r=a(2),o=a.n(r),d=a(7),m=a.n(d),j=a(5),b=function(e,t){switch(t.type){case"FetchDataSuccess":return Object(i.a)(Object(i.a)({},e),{},{tenants:t.payload.tenants,tenantsCount:t.payload.tenantsCount});case"FetchDataFailure":return Object(i.a)(Object(i.a)({},e),{},{alert:{show:!0,type:"danger",message:"Could not load remote data: ".concat(t.payload.error)}});case"HandleViewTenant":return Object(i.a)(Object(i.a)({},e),{},{onViewTenant:!0,onAddTenant:!1,onEditTenant:!1,tenant:t.payload.tenant});case"HandleCloseViewTenant":return Object(i.a)(Object(i.a)({},e),{},{onViewTenant:!1,tenant:null});case"HandleOnAddTenant":return Object(i.a)(Object(i.a)({},e),{},{onAddTenant:!0,onEditTenant:!1,alert:Object(i.a)(Object(i.a)({},e.alert),{},{show:!1})});case"HandleCancelCreate":return Object(i.a)(Object(i.a)({},e),{},{onAddTenant:!1});case"BeforeCreateTenant":return Object(i.a)(Object(i.a)({},e),{},{alert:{show:!0,type:"info",message:"Creating tenant. Please wait!"}});case"CreateTenantSuccess":var a=e.tenants;a.push(t.payload.tenant);var n=e.tenantsCount++;return Object(i.a)(Object(i.a)({},e),{},{tenants:a,tenantsCount:n,onAddTenant:!1,alert:{show:!0,type:"success",message:"Tenant successfully created!"}});case"CreateTenantFailure":return Object(i.a)(Object(i.a)({},e),{},{alert:{show:!0,type:"danger",message:"Could not create tenant: ".concat(t.payload.error)}});case"BeforeDeleteTenant":return Object(i.a)(Object(i.a)({},e),{},{alert:{show:!0,type:"info",message:"Deleting tenant. Please wait!"}});case"DeleteTenantSuccess":var s=e.tenants,c=s.findIndex((function(e){return e.id===t.payload.id}));s.splice(c,1);var l=e.tenantsCount--;return Object(i.a)(Object(i.a)({},e),{},{onViewTenant:!1,tenants:s,tenantsCount:l,alert:{show:!0,type:"success",message:"Tenant successfully deleted!"}});case"DeleteTenantFailure":return Object(i.a)(Object(i.a)({},e),{},{onViewTenant:!1,alert:{show:!0,type:"danger",message:"Could not delete tenant: ".concat(t.payload.error)}});case"BeforeUpdateTenant":return Object(i.a)(Object(i.a)({},e),{},{alert:{show:!0,type:"info",message:"Updating tenant. Please wait!"}});case"HandleCancelUpdate":return Object(i.a)(Object(i.a)({},e),{},{onEditTenant:!1});case"HandleEditTenant":var r=e.tenants,o=r.findIndex((function(e){return e.id===t.payload.id})),d=r[o];return Object(i.a)(Object(i.a)({},e),{},{onEditTenant:!0,tenant:d,onAddTenant:!1,alert:Object(i.a)(Object(i.a)({},e.alert),{},{show:!1})});case"UpdateTenantSuccess":var m=e.tenants,j=m.findIndex((function(e){return e.id===t.payload.tenant.id}));return m[j]=t.payload.tenant,Object(i.a)(Object(i.a)({},e),{},{onViewTenant:!1,tenants:m,tenant:t.payload.tenant,onEditTenant:!1,alert:{show:!0,type:"success",message:"Tenant successfully updated!"}});case"UpdateTenantFailure":return Object(i.a)(Object(i.a)({},e),{},{onViewTenant:!1,alert:{show:!0,type:"danger",message:"Could not update tenant: ".concat(t.payload.error)}});case"HandleCloseAlert":return Object(i.a)(Object(i.a)({},e),{},{alert:{show:!1,message:"",type:""}});default:return e}},h=a(3),u=a.n(h),O=a(4),x=function(){var e=Object(O.a)(u.a.mark((function e(t,a,n){var s,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n({type:"BeforeCreateTenant"}),e.prev=1,e.next=4,fetch("/v1/tenants?createPrimaryContact=".concat(a),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 4:if((s=e.sent).ok){e.next=7;break}throw new Error(s.statusText);case 7:return e.next=9,s.json();case 9:c=e.sent,n({type:"CreateTenantSuccess",payload:{tenant:c}}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),n({type:"CreateTenantFailure",payload:{error:e.t0}});case 16:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t,a,n){return e.apply(this,arguments)}}(),p=function(){var e=Object(O.a)(u.a.mark((function e(t,a){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a({type:"BeforeDeleteTenant"}),e.prev=1,e.next=4,fetch("/v1/tenants/".concat(t),{method:"DELETE"});case 4:if((n=e.sent).ok){e.next=7;break}throw new Error(n.statusText);case 7:a({type:"DeleteTenantSuccess",payload:{id:t}}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),a({type:"DeleteTenantFailure",payload:{error:e.t0}});case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,a){return e.apply(this,arguments)}}(),N=function(){var e=Object(O.a)(u.a.mark((function e(t,a){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a({type:"BeforeUpdateTenant"}),e.prev=1,e.next=4,fetch("/v1/tenants",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 4:if((n=e.sent).ok){e.next=7;break}throw new Error(n.statusText);case 7:return e.next=9,n.json();case 9:a({type:"UpdateTenantSuccess",payload:{tenant:t}}),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(1),alert("error zone"),a({type:"UpdateTenantFailure",payload:{error:e.t0}});case 16:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t,a){return e.apply(this,arguments)}}(),v=function(){var e=Object(O.a)(u.a.mark((function e(t){var a,n,s,c=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=c.length>1&&void 0!==c[1]?c[1]:{},e.prev=1,e.next=4,fetch("/v1/tenants?findOptions=".concat(encodeURI(JSON.stringify(a))));case 4:if((n=e.sent).ok){e.next=7;break}throw new Error(n.statusText);case 7:return e.next=9,n.json();case 9:s=e.sent,t({type:"FetchDataSuccess",payload:{tenantsCount:s[1],tenants:s[0]}}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),t({type:"FetchDataFailure",payload:{error:e.t0}});case 16:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t){return e.apply(this,arguments)}}(),f=a(8),y=a(0),g=function(e){var t=e.message,a=e.type,n=e.onClickHandler;return Object(y.jsxs)(f.Notification,{color:a,onClick:n,children:[t,Object(y.jsx)(f.Button,{remove:!0})]})},C=o.a.createContext(null),w=function(e){var t,a,n,s=e.tenant,c=Object(r.useContext)(C);return Object(y.jsxs)("tr",{children:[Object(y.jsxs)("td",{children:[s.subDomainName,".",s.regionRootDomainName]}),Object(y.jsx)("td",{children:null===(t=s.primaryContact)||void 0===t?void 0:t.firstName}),Object(y.jsx)("td",{children:null===(a=s.primaryContact)||void 0===a?void 0:a.lastName}),Object(y.jsx)("td",{children:null===(n=s.primaryContact)||void 0===n?void 0:n.primaryEmailAddress}),Object(y.jsx)("td",{children:s.status}),Object(y.jsx)("td",{children:Object(y.jsxs)("div",{className:"buttons are-small",children:[Object(y.jsx)("button",{className:"button is-link",onClick:function(){c.dispatch({type:"HandleViewTenant",payload:{tenant:s}})},children:"View Detail"}),Object(y.jsx)("button",{className:"button is-warning",onClick:function(){c.dispatch({type:"HandleEditTenant",payload:{id:s.id}})},children:"Edit"}),Object(y.jsx)("button",{className:"button is-danger",onClick:function(){window.confirm("This action cannot be reversed! Are you sure you want to delete?")&&c.handleDeleteTenant(s.id,c.dispatch)},children:"Delete"})]})})]})},T=function(){return Object(y.jsx)("thead",{children:Object(y.jsxs)("tr",{children:[Object(y.jsx)("th",{children:"Default Domain Name"}),Object(y.jsx)("th",{children:"Contact First Name"}),Object(y.jsx)("th",{children:"Contact Last Name"}),Object(y.jsx)("th",{children:"Contact Email"}),Object(y.jsx)("th",{children:"Status"}),Object(y.jsx)("th",{children:"Action"})]})})},D=function(e){var t;return t=e.tenants.map((function(e){return Object(y.jsx)(w,{tenant:e},e.id)})),Object(y.jsxs)("table",{className:"table is-striped is-narrow is-hoverable",children:[Object(y.jsx)("caption",{children:Object(y.jsx)("h3",{children:"Available tenants"})}),Object(y.jsx)(T,{}),Object(y.jsx)("tbody",{children:t})]})};!function(e){e.A="active",e.S="suspended",e.O="owing"}(n||(n={})),function(e){e.M="male",e.F="female"}(s||(s={})),function(e){e.A="admin",e.M="marketing",e.C="content-manager"}(c||(c={})),function(e){e.M="manager",e.T="tech-support"}(l||(l={}));var E=a(9),k=function e(){Object(E.a)(this,e)};k.getAssignableRegions=function(){var e=Object(O.a)(u.a.mark((function e(t,a){var n,s,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("/v1","/regions/get-tenant-assignable-regions-info"),{method:"GET",headers:{"Content-Type":"application/json"}});case 3:if((n=e.sent).ok){e.next=6;break}throw new Error(n.statusText);case 6:return e.next=8,n.json();case 8:s=e.sent,c=[],s.map((function(e){e.tenantCount<e.tenantCountCapacity&&c.push(e)})),a(Object(i.a)(Object(i.a)({},t),{},{assignableRegionsInfo:c})),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,a){return e.apply(this,arguments)}}(),k.checkIfChosenDomainNameExists=function(){var e=Object(O.a)(u.a.mark((function e(t,a,n,s){var c,l;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("/v1","/tenants/check-if-chosen-domain-name-exists/").concat(t,"/").concat(a),{method:"GET",headers:{"Content-Type":"application/json"}});case 3:if((c=e.sent).ok){e.next=6;break}throw new Error(c.statusText);case 6:return e.next=8,c.json();case 8:l=e.sent,s(Object(i.a)(Object(i.a)({},n),{},{chosenDomainNameExists:l,domainNameExistsChecked:!0})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t,a,n,s){return e.apply(this,arguments)}}();var A=function(e){var t,a,c={tenant:{name:"",subDomainName:null,regionName:"",regionRootDomainName:"",address:"",moreInfo:"",status:void 0,customURLSlug:null,dateOfRegistration:new Date,active:!0,uniqueSchema:!0,primaryContact:{isPrimaryEmailAddressVerified:!1}},createPrimaryContact:!0,assignableRegionsInfo:[],regionChosen:null,chosenDomainNameExists:!0,domainNameExistsChecked:!1},l=Object(r.useState)(Object(i.a)({},c)),o=Object(j.a)(l,2),d=o[0],m=o[1],b=function(e){var t=d.tenant,a=e.target;t[a.name]=a.value,"subDomainName"==a.name?m(Object(i.a)(Object(i.a)({},d),{},{tenant:t,domainNameExistsChecked:!1})):m(Object(i.a)(Object(i.a)({},d),{},{tenant:t}))},h=function(e){var t=d.tenant,a=e.target;t.primaryContact[a.name]=a.value,m(Object(i.a)(Object(i.a)({},d),{},{tenant:t}))};return Object(r.useEffect)((function(){k.getAssignableRegions(d,m)}),[]),Object(y.jsx)("form",{onSubmit:function(t){t.preventDefault();d.tenant;e.handleCreateTenant(d.tenant,d.createPrimaryContact?1:0,e.dispatch)},children:Object(y.jsxs)("div",{className:"box",children:[Object(y.jsx)("div",{className:"columns is-mobile",children:Object(y.jsx)("h3",{children:"Add Tenant"})}),Object(y.jsxs)("div",{className:"columns is-mobile",children:[Object(y.jsx)("div",{className:"column",children:Object(y.jsxs)("div",{className:"box",children:[Object(y.jsxs)("div",{className:"field",children:[Object(y.jsx)("label",{className:"label",children:"Name"}),Object(y.jsx)("div",{className:"control",children:Object(y.jsx)("input",{className:"input",type:"text",placeholder:"Your preferred common name",name:"name",value:d.tenant.name,onChange:b,required:!0})})]}),d.assignableRegionsInfo.length>0&&Object(y.jsxs)("div",{className:"box",children:[Object(y.jsx)("h6",{children:"Choose region and domain name"}),Object(y.jsxs)("div",{className:"field",children:[Object(y.jsx)("label",{className:"label",children:"Region"}),Object(y.jsx)("select",{name:"region",id:"region",multiple:!0,className:"control",onChange:function(e){var t=e.target.value,a=d.assignableRegionsInfo.find((function(e){return e.name===t})),n=Object(i.a)(Object(i.a)({},d.tenant),{},{regionName:a.name,regionRootDomainName:a.rootDomainName});m(Object(i.a)(Object(i.a)({},d),{},{tenant:n,regionChosen:a,domainNameExistsChecked:!1})),null!=d.tenant.subDomainName&&d.tenant.subDomainName},style:{minWidth:"50%"},children:d.assignableRegionsInfo.map((function(e){return Object(y.jsx)("option",{value:e.name,children:"Name: ".concat(e.name,"; \n                                                        Location: ").concat(e.city,", \n                                                        ").concat(e.country,"; Applicable domain name: ").concat(e.rootDomainName)})}))})]}),Object(y.jsxs)("div",{className:"field",children:[Object(y.jsx)("label",{className:"label",children:"Subdomain name"}),Object(y.jsx)("div",{className:"control",children:d.domainNameExistsChecked&&d.tenant.subDomainName&&d.regionChosen?Object(y.jsxs)("div",{children:[Object(y.jsx)("input",{className:"input ".concat(d.chosenDomainNameExists?"is-danger":"is-success"),type:"text",placeholder:"Enter your preferred subdomain name. Must be available for the Region chosen",name:"subDomainName",value:d.tenant.subDomainName,onChange:b,required:!0}),Object(y.jsxs)("p",{className:"help ".concat(d.chosenDomainNameExists?"is-danger":"is-success"),children:["Your chosen domain name ",d.tenant.subDomainName&&d.regionChosen?"".concat(d.tenant.subDomainName,".").concat(d.regionChosen.rootDomainName):""," ",d.chosenDomainNameExists?"is unavailable":"is available"]})]}):Object(y.jsx)("input",{className:"input",type:"text",placeholder:"Enter your preferred subdomain name. Must be available for the Region chosen",name:"subDomainName",value:d.tenant.subDomainName,onChange:b,required:!0})})]}),Object(y.jsx)("div",{className:"field",children:Object(y.jsx)("button",{className:"button",disabled:!d.tenant.subDomainName||!d.regionChosen,onClick:function(e){e.preventDefault(),null!=d.tenant.subDomainName&&""!=d.tenant.subDomainName&&null!=d.tenant.regionRootDomainName&&k.checkIfChosenDomainNameExists(d.tenant.subDomainName,d.tenant.regionRootDomainName,d,m)},children:"Check Availability"})})]}),Object(y.jsxs)("div",{className:"field",children:[Object(y.jsx)("label",{className:"label",children:"Address"}),Object(y.jsx)("div",{className:"control",children:Object(y.jsx)("input",{className:"input",type:"text",placeholder:"Address input",name:"address",value:d.tenant.address,onChange:b,required:!0})})]}),Object(y.jsxs)("div",{className:"field",children:[Object(y.jsx)("label",{className:"label",children:"More Information"}),Object(y.jsx)("div",{className:"control",children:Object(y.jsx)("textarea",{className:"input",placeholder:"More information input",rows:10,name:"moreInfo",value:d.tenant.moreInfo,onChange:b})})]}),Object(y.jsx)("div",{className:"select",children:Object(y.jsxs)("select",{name:"status",onChange:b,value:d.tenant.status,children:[Object(y.jsx)("option",{value:"notSelected",children:"Select tenant status"}),Object(y.jsx)("option",{value:n.A,children:"Active"}),Object(y.jsx)("option",{value:n.O,children:"Owing"}),Object(y.jsx)("option",{value:n.S,children:"Suspended"})]})}),Object(y.jsxs)("div",{className:"field",children:[Object(y.jsx)("label",{className:"label",children:"Date of Registration"}),Object(y.jsx)("div",{className:"control",children:Object(y.jsx)("input",{className:"input",type:"date",required:!0,pattern:"[0-9]{4}-[0-9]{2}-[0-9]{2}",max:"{{todaysDate}}",placeholder:"Date of registration",name:"dateOfRegistration",value:null===(t=d.tenant.dateOfRegistration)||void 0===t?void 0:t.toLocaleString(),onChange:b})})]})]})}),Object(y.jsxs)("div",{className:"column",children:[Object(y.jsxs)("div",{className:"box",children:[Object(y.jsx)("h4",{children:" Set Primary Contact"}),Object(y.jsx)("div",{className:"field",children:Object(y.jsx)("div",{className:"control",children:Object(y.jsxs)("span",{children:[Object(y.jsx)("input",{type:"checkbox",name:"addPrimaryContact",value:"",checked:d.createPrimaryContact,onChange:function(){var e=!d.createPrimaryContact;m(Object(i.a)(Object(i.a)({},d),{},{createPrimaryContact:e}))}}),"\xa0Create?"]})})})]}),!d.createPrimaryContact&&Object(y.jsx)("div",{className:"box",children:Object(y.jsxs)("div",{className:"field",children:[Object(y.jsx)("label",{className:"label",children:"Primary Email Address of Contact"}),Object(y.jsx)("div",{className:"control",children:Object(y.jsx)("input",{name:"primaryEmailAddress",className:"input",type:"email",placeholder:"Enter valid email here",maxLength:30,value:d.tenant.primaryContact.primaryEmailAddress,onChange:h,required:!0})})]})}),d.createPrimaryContact&&Object(y.jsxs)("div",{id:"addPrimaryContactBox",className:"box",children:[Object(y.jsx)("h5",{children:"Create Primary Contact"}),Object(y.jsxs)("div",{className:"field",children:[Object(y.jsx)("label",{className:"label",children:"Primary Email Address"}),Object(y.jsx)("div",{className:"control",children:Object(y.jsx)("input",{name:"primaryEmailAddress",className:"input",type:"email",placeholder:"Enter valid email here",maxLength:30,value:d.tenant.primaryContact.primaryEmailAddress,onChange:h,required:!0})}),Object(y.jsx)("p",{className:"help",children:"The email address should not be more than 30 letters"})]}),Object(y.jsx)("div",{className:"field",children:Object(y.jsx)("div",{className:"control",children:Object(y.jsxs)("span",{children:[Object(y.jsx)("input",{type:"checkbox",name:"isPrimaryEmailAddressVerified",value:"",checked:d.tenant.primaryContact.isPrimaryEmailAddressVerified,onChange:function(){var e=!d.tenant.primaryContact.isPrimaryEmailAddressVerified,t=Object(i.a)(Object(i.a)({},d.tenant.primaryContact),{},{isPrimaryEmailAddressVerified:e}),a=Object(i.a)(Object(i.a)({},d.tenant),{},{primaryContact:t});m(Object(i.a)(Object(i.a)({},d),{},{tenant:a}))}}),"\xa0Primary Email Address Verified?"]})})}),Object(y.jsxs)("div",{className:"field",children:[Object(y.jsx)("label",{className:"label",children:"Password"}),Object(y.jsx)("div",{className:"control",children:Object(y.jsx)("input",{name:"passwordHash",className:"input",type:"password",placeholder:"Enter password here",maxLength:128,value:d.tenant.primaryContact.passwordHash,onChange:h,required:!0})}),Object(y.jsx)("p",{className:"help",children:"The password should not be more than 128 letters"})]}),Object(y.jsxs)("div",{className:"field",children:[Object(y.jsx)("label",{className:"label",children:"First Name"}),Object(y.jsx)("div",{className:"control",children:Object(y.jsx)("input",{name:"firstName",className:"input",type:"text",placeholder:"Enter first name here",maxLength:30,value:d.tenant.primaryContact.firstName,onChange:h,required:!0})}),Object(y.jsx)("p",{className:"help",children:"The first name should not be more than 30 letters"})]}),Object(y.jsxs)("div",{className:"field",children:[Object(y.jsx)("label",{className:"label",children:"Last Name"}),Object(y.jsx)("div",{className:"control",children:Object(y.jsx)("input",{name:"lastName",className:"input",type:"text",placeholder:"Enter last name here",maxLength:30,value:d.tenant.primaryContact.lastName,onChange:h,required:!0})}),Object(y.jsx)("p",{className:"help",children:"The last name should not be more than 30 letters"})]}),Object(y.jsxs)("div",{className:"field",children:[Object(y.jsx)("label",{className:"label",children:"Middle Name"}),Object(y.jsx)("div",{className:"control",children:Object(y.jsx)("input",{name:"middleName",className:"input",type:"text",placeholder:"Enter middle name here",maxLength:30,value:d.tenant.primaryContact.middleName,onChange:h})}),Object(y.jsx)("p",{className:"help",children:"Even though optional, it is advisable to enter middle name"})]}),Object(y.jsxs)("div",{className:"field",children:[Object(y.jsx)("label",{className:"label",children:"Common Name"}),Object(y.jsx)("div",{className:"control",children:Object(y.jsx)("input",{name:"commonName",className:"input",type:"text",placeholder:"Enter common name here",maxLength:20,value:d.tenant.primaryContact.commonName,onChange:h})}),Object(y.jsx)("p",{className:"help",children:"What is the user commonly called. The common name should not be more than 20 letters"})]}),Object(y.jsxs)("div",{className:"field",children:[Object(y.jsx)("label",{className:"label",children:"Home Address"}),Object(y.jsx)("div",{className:"control",children:Object(y.jsx)("textarea",{name:"homeAddress",className:"input",rows:6,placeholder:"Enter home address here",maxLength:100,value:d.tenant.primaryContact.homeAddress,onChange:h})}),Object(y.jsx)("p",{className:"help",children:"The home address should not be more than 100 letters"})]}),Object(y.jsxs)("div",{className:"field",children:[Object(y.jsx)("label",{className:"label",children:"Gender"}),Object(y.jsx)("div",{className:"control",children:Object(y.jsx)("div",{className:"select",children:Object(y.jsxs)("select",{name:"gender",value:d.tenant.primaryContact.gender,onChange:h,children:[Object(y.jsx)("option",{value:"notSelected",children:"Select Gender"}),Object(y.jsx)("option",{value:s.F,children:"Female"}),Object(y.jsx)("option",{value:s.M,children:"Male"})]})})}),Object(y.jsx)("p",{className:"help",children:"Select the Gender"})]}),Object(y.jsxs)("div",{className:"field",children:[Object(y.jsx)("label",{className:"label",children:"Date of Birth"}),Object(y.jsx)("div",{className:"control",children:Object(y.jsx)("input",{name:"dateOfBirth",id:"dateOfBirth",className:"input",type:"date",required:!0,pattern:"[0-9]{4}-[0-9]{2}-[0-9]{2}",max:(new Date).toLocaleString(),value:null===(a=d.tenant.primaryContact.dateOfBirth)||void 0===a?void 0:a.toLocaleString(),onChange:h})}),Object(y.jsx)("p",{className:"help",children:"The date of birth of the user. Pattern of entry is YYYY-MM-DD"})]}),Object(y.jsxs)("div",{className:"field",children:[Object(y.jsx)("label",{className:"label",children:"Nationality"}),Object(y.jsx)("div",{className:"control",children:Object(y.jsx)("input",{name:"nationality",className:"input",type:"text",placeholder:"Enter nationality here",maxLength:30,value:d.tenant.primaryContact.nationality,onChange:h})}),Object(y.jsx)("p",{className:"help",children:"The nationality should not be more than 30 letters"})]}),Object(y.jsxs)("div",{className:"field",children:[Object(y.jsx)("label",{className:"label",children:"State"}),Object(y.jsx)("div",{className:"control",children:Object(y.jsx)("input",{name:"stateOfOrigin",className:"input",type:"text",placeholder:"Enter state here",maxLength:30,value:d.tenant.primaryContact.stateOfOrigin,onChange:h})}),Object(y.jsx)("p",{className:"help",children:"The state should not be more than 30 letters"})]}),Object(y.jsxs)("div",{className:"field",children:[Object(y.jsx)("label",{className:"label",children:"Zip code"}),Object(y.jsx)("div",{className:"control",children:Object(y.jsx)("input",{name:"zip",className:"input",type:"text",placeholder:"Enter zip code here",maxLength:6,value:d.tenant.primaryContact.zip,onChange:h})}),Object(y.jsx)("p",{className:"help",children:"The zip code should not be more than 6 letters"})]})]})]})]}),Object(y.jsx)("div",{className:"columns is-mobile",children:Object(y.jsxs)("div",{className:"field is-grouped",children:[Object(y.jsx)("div",{className:"control",children:Object(y.jsx)("button",{className:"button is-link",children:"Submit"})}),Object(y.jsx)("div",{className:"control",children:Object(y.jsx)("button",{className:"button is-link is-light",onClick:function(){e.dispatch({type:"HandleCancelCreate"})},children:"Cancel"})})]})})]})})},S=function(e){var t={id:e.tenant.id,name:e.tenant.name,address:e.tenant.address,moreInfo:e.tenant.moreInfo,status:e.tenant.status,customURLSlug:e.tenant.customURLSlug,dateOfRegistration:e.tenant.dateOfRegistration,active:e.tenant.active,uniqueSchema:e.tenant.uniqueSchema,primaryContact:e.tenant.primaryContact,teamMembers:e.tenant.teamMembers,tenantAccountOfficers:e.tenant.tenantAccountOfficers,tenantConfigDetail:e.tenant.tenantConfigDetail,customTheme:e.tenant.customTheme},a=Object(r.useState)(Object(i.a)({},t)),s=Object(j.a)(a,2),c=s[0],l=s[1],o=function(e){var t=c,a=e.target;t[a.name]=a.value,l(Object(i.a)({},t))},d=c.teamMembers.forEach((function(e,t){return Object(y.jsx)("div",{className:"columns",children:Object(y.jsxs)("tr",{children:[Object(y.jsx)("td",{children:t}),Object(y.jsx)("td",{children:e.user.primaryEmailAddress}),Object(y.jsx)("td",{children:e.user.firstName}),Object(y.jsx)("td",{children:e.user.lastName}),Object(y.jsx)("td",{children:e.user.primaryEmailAddress}),Object(y.jsx)("td",{children:e.roles.toString()}),Object(y.jsx)("td",{children:Object(y.jsxs)("div",{className:"buttons are-small",children:[Object(y.jsx)("button",{className:"button is-link",onClick:function(){return alert("Yet to be implemented"),!1},children:"View Detail"}),Object(y.jsx)("button",{className:"button is-warning",onClick:function(){return alert("Yet to be implemented"),!1},children:"Edit"}),Object(y.jsx)("button",{className:"button is-danger",onClick:function(){return alert("Yet to be implemented"),!1},children:"Delete"})]})})]})})})),m=c.tenantAccountOfficers.forEach((function(e,t){return Object(y.jsx)("div",{className:"columns",children:Object(y.jsxs)("tr",{children:[Object(y.jsx)("td",{children:t}),Object(y.jsx)("td",{children:e.user.primaryEmailAddress}),Object(y.jsx)("td",{children:e.user.firstName}),Object(y.jsx)("td",{children:e.user.lastName}),Object(y.jsx)("td",{children:e.user.primaryEmailAddress}),Object(y.jsx)("td",{children:e.roles.toString()}),Object(y.jsx)("td",{children:Object(y.jsxs)("div",{className:"buttons are-small",children:[Object(y.jsx)("button",{className:"button is-link",onClick:function(){return alert("Yet to be implemented"),!1},children:"View Detail"}),Object(y.jsx)("button",{className:"button is-warning",onClick:function(){return alert("Yet to be implemented"),!1},children:"Edit"}),Object(y.jsx)("button",{className:"button is-danger",onClick:function(){return alert("Yet to be implemented"),!1},children:"Delete"})]})})]})})}));return Object(y.jsxs)("div",{className:"columns is-mobile",children:[Object(y.jsx)("div",{className:"column",children:Object(y.jsx)("form",{onSubmit:function(t){t.preventDefault(),e.handleUpdateTenant(c,e.dispatch)},children:Object(y.jsxs)("div",{className:"box",children:[Object(y.jsx)("div",{className:"columns is-mobile",children:Object(y.jsxs)("h3",{children:["Edit ",e.tenant.subDomainName,".",e.tenant.regionRootDomainName]})}),Object(y.jsx)("div",{className:"columns is-mobile",children:Object(y.jsx)("div",{className:"column",children:Object(y.jsxs)("div",{className:"box",children:[Object(y.jsxs)("div",{className:"field",children:[Object(y.jsx)("label",{className:"label",children:"Name"}),Object(y.jsx)("div",{className:"control",children:Object(y.jsx)("input",{className:"input",type:"text",placeholder:"Unique name input",name:"name",value:c.name,onChange:o,required:!0})})]}),Object(y.jsxs)("div",{className:"field",children:[Object(y.jsx)("label",{className:"label",children:"Address"}),Object(y.jsx)("div",{className:"control",children:Object(y.jsx)("input",{className:"input",type:"text",placeholder:"Address input",name:"address",value:c.address,onChange:o,required:!0})})]}),Object(y.jsxs)("div",{className:"field",children:[Object(y.jsx)("label",{className:"label",children:"More Information"}),Object(y.jsx)("div",{className:"control",children:Object(y.jsx)("textarea",{className:"input",placeholder:"More information input",rows:10,name:"moreInfo",value:c.moreInfo,onChange:o})})]}),Object(y.jsx)("div",{className:"select",children:Object(y.jsxs)("select",{name:"status",onChange:o,value:c.status,children:[Object(y.jsx)("option",{value:"notSelected",children:"Select tenant status"}),Object(y.jsx)("option",{value:n.A,children:"Active"}),Object(y.jsx)("option",{value:n.O,children:"Owing"}),Object(y.jsx)("option",{value:n.S,children:"Suspended"})]})}),Object(y.jsxs)("div",{className:"field",children:[Object(y.jsxs)("label",{className:"label",children:["Date of Registration: ",new Date(c.dateOfRegistration).toLocaleDateString("en-GB")]}),Object(y.jsx)("div",{className:"control",children:Object(y.jsx)("input",{className:"input",type:"date",required:!0,pattern:"[0-9]{4}-[0-9]{2}-[0-9]{2}",max:"{{todaysDate}}",placeholder:"Date of registration",name:"dateOfRegistration",onChange:o})})]})]})})}),Object(y.jsx)("div",{className:"columns is-mobile",children:Object(y.jsxs)("div",{className:"field is-grouped",children:[Object(y.jsx)("div",{className:"control",children:Object(y.jsx)("button",{className:"button is-link",children:"Submit"})}),Object(y.jsx)("div",{className:"control",children:Object(y.jsx)("button",{className:"button is-link is-light",onClick:function(){e.dispatch({type:"HandleCancelUpdate"})},children:"Cancel"})})]})})]})})}),Object(y.jsxs)("div",{className:"column",children:[Object(y.jsx)("div",{className:"columns",children:Object(y.jsx)("form",{className:"column",children:Object(y.jsxs)("div",{className:"box",children:[Object(y.jsxs)("div",{className:"field",children:[Object(y.jsx)("label",{className:"label",children:"Change Primary Contact:"}),Object(y.jsx)("div",{className:"control",children:Object(y.jsx)("input",{name:"primaryEmailAddress",className:"input",type:"text",placeholder:"Enter valid email here",maxLength:30,value:c.primaryContact.primaryEmailAddress,required:!0})}),Object(y.jsx)("p",{className:"help",children:"The email address should not be more than 30 letters"})]}),Object(y.jsx)("div",{className:"control",children:Object(y.jsx)("button",{onClick:function(){return alert("Yet to be implemented"),!1},className:"button is-link is-small",children:"Submit"})})]})})}),Object(y.jsx)("div",{className:"columns",children:Object(y.jsx)("form",{className:"column",children:Object(y.jsx)("div",{className:"box",children:Object(y.jsxs)("div",{className:"field",children:[Object(y.jsx)("label",{className:"label",children:"Change Team Members:"}),c.teamMembers.length>0?d:Object(y.jsx)("div",{children:"No team members yet"}),Object(y.jsx)("div",{className:"control",children:Object(y.jsx)("button",{onClick:function(){return alert("Yet to be implemented"),!1},className:"button is-link is-small",children:"Add New"})})]})})})}),Object(y.jsx)("div",{className:"columns",children:Object(y.jsx)("form",{className:"column",children:Object(y.jsx)("div",{className:"box",children:Object(y.jsxs)("div",{className:"field",children:[Object(y.jsx)("label",{className:"label",children:"Change Account Officers:"}),c.tenantAccountOfficers.length>0?m:Object(y.jsx)("div",{children:"No account officers yet"}),Object(y.jsx)("div",{className:"control",children:Object(y.jsx)("button",{onClick:function(){return alert("Yet to be implemented"),!1},className:"button is-link is-small",children:"Add New"})})]})})})})]})]})},P=function(e){var t=e.tenant,a={upload:{fileToUpload:"",uploadButtonState:""},alert:{show:!1,type:void 0,message:""},logo:{src:"/v1/tenants/".concat(t.id,"/logo")}},n=Object(r.useState)(Object(i.a)({},a)),s=Object(j.a)(n,2),c=s[0],l=s[1],o=Object(r.useContext)(C),d=function(){var e=Object(O.a)(u.a.mark((function e(a){var n,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),(n=new FormData).append("file",c.upload.fileToUpload),e.prev=3,l(Object(i.a)(Object(i.a)({},c),{},{upload:Object(i.a)(Object(i.a)({},c.upload),{},{uploadButtonState:"is-loading"})})),e.next=7,fetch("/v1/tenants/".concat(t.id,"/logo"),{method:"POST",body:n});case 7:if((s=e.sent).ok){e.next=10;break}throw new Error(s.statusText);case 10:l(Object(i.a)(Object(i.a)({},c),{},{logo:Object(i.a)(Object(i.a)({},c.logo),{},{src:"".concat(c.logo.src,"?&").concat(Date.now())}),upload:{fileToUpload:"",uploadButtonState:""}})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(3),l(Object(i.a)(Object(i.a)({},c),{},{alert:{show:!0,type:"danger",message:"logo upload failed: ".concat(e.t0.message)}}));case 16:case"end":return e.stop()}}),e,null,[[3,13]])})));return function(t){return e.apply(this,arguments)}}(),m=Object(y.jsx)(g,{type:c.alert.type,message:c.alert.message,onClickHandler:function(){l(Object(i.a)(Object(i.a)({},c),{},{alert:{show:!1,message:"",type:void 0}}))}});return Object(y.jsxs)("div",{className:"modal modal-full-screen modal-fx-fadeInScale is-active",children:[Object(y.jsx)("div",{className:"modal-background"}),Object(y.jsxs)("div",{className:"modal-content",children:[Object(y.jsxs)("header",{className:"modal-card-head",children:[Object(y.jsx)("h3",{className:"modal-card-title",children:"Details of ".concat(t.subDomainName,".").concat(t.regionRootDomainName)}),Object(y.jsx)("button",{className:"delete","aria-label":"close",onClick:function(){o.dispatch({type:"HandleCloseViewTenant"})}})]}),Object(y.jsx)("section",{className:"modal-card-body",children:Object(y.jsxs)("div",{className:"columns",children:[Object(y.jsxs)("div",{className:"column is-two-thirds",children:[Object(y.jsxs)("div",{className:"columns",children:[Object(y.jsx)("div",{className:"column is-two-fifths",children:"Name:"}),Object(y.jsx)("div",{className:"column",children:t.name})]}),Object(y.jsxs)("div",{className:"columns",children:[Object(y.jsx)("div",{className:"column is-two-fifths",children:"Address:"}),Object(y.jsx)("div",{className:"column",children:t.address})]}),Object(y.jsxs)("div",{className:"columns",children:[Object(y.jsx)("div",{className:"column is-two-fifths",children:"More Information:"}),Object(y.jsx)("div",{className:"column",children:t.moreInfo})]}),Object(y.jsxs)("div",{className:"columns",children:[Object(y.jsx)("div",{className:"column is-two-fifths",children:"Contact firstname:"}),Object(y.jsx)("div",{className:"column",children:t.primaryContact.firstName})]}),Object(y.jsxs)("div",{className:"columns",children:[Object(y.jsx)("div",{className:"column is-two-fifths",children:"Contact lastname:"}),Object(y.jsx)("div",{className:"column",children:t.primaryContact.lastName})]}),Object(y.jsxs)("div",{className:"columns",children:[Object(y.jsx)("div",{className:"column is-two-fifths",children:"Contact email:"}),Object(y.jsx)("div",{className:"column",children:t.primaryContact.primaryEmailAddress})]}),Object(y.jsxs)("div",{className:"columns",children:[Object(y.jsx)("div",{className:"column is-two-fifths",children:"Status:"}),Object(y.jsx)("div",{className:"column",children:t.status})]}),Object(y.jsxs)("div",{className:"columns",children:[Object(y.jsx)("div",{className:"column is-two-fifths",children:"Active:"}),Object(y.jsx)("div",{className:"column",children:t.active?"Yes":"No"})]})]}),Object(y.jsxs)("div",{className:"column",children:[Object(y.jsx)("div",{className:"columns",children:Object(y.jsx)("div",{className:"column",children:"Logo"})}),Object(y.jsx)("div",{className:"columns",children:Object(y.jsx)("div",{className:"column",children:Object(y.jsx)("img",{src:"".concat(c.logo.src)})})}),Object(y.jsx)("form",{className:"columns",onSubmit:d,children:Object(y.jsxs)("div",{className:"field",children:[Object(y.jsx)("label",{className:"label",children:"Upload logo"}),Object(y.jsx)("div",{className:"control",children:Object(y.jsx)("input",{type:"file",name:"file",onChange:function(e){l(Object(i.a)(Object(i.a)({},c),{},{upload:Object(i.a)(Object(i.a)({},c.upload),{},{fileToUpload:e.target.files[0]})}))},required:!0})}),Object(y.jsx)("div",{className:"field",children:c.alert.show&&m}),Object(y.jsx)("div",{className:"field control",children:Object(y.jsx)("button",{className:"button is-link is-small ".concat(c.upload.uploadButtonState),type:"submit",children:"Submit"})})]})})]})]})}),Object(y.jsx)("footer",{className:"modal-card-foot",children:Object(y.jsxs)("div",{className:"buttons are-small",children:[Object(y.jsx)("button",{className:"button is-warning",onClick:function(){o.dispatch({type:"HandleEditTenant",payload:{id:t.id}})},children:"Edit"}),Object(y.jsx)("button",{className:"button is-danger",onClick:function(){window.confirm("This action cannot be reversed! Are you sure you want to delete?")&&o.handleDeleteTenant(t.id,o.dispatch)},children:"Delete"})]})})]})]})},R=function(e){var t={tenants:e.tenants||[],tenantsCount:e.tenantsCount||0,tenant:e.tenant||null,onAddTenant:e.onAddTenant||!1,onViewTenant:e.onViewTenant||!1,onEditTenant:e.onEditTenant||!1,alert:e.alert||{show:!1,message:"",type:""}},a=Object(r.useReducer)(b,t),n=Object(j.a)(a,2),s=n[0],c=n[1],l={relations:["primaryContact","teamMembers","tenantAccountOfficers","customTheme","tenantConfigDetail"]};Object(r.useEffect)((function(){v(c,l)}),[]);var i=Object(y.jsx)(g,{type:s.alert.type,message:s.alert.message,onClickHandler:function(){c({type:"HandleCloseAlert"})}});return s.onEditTenant&&null!==s.tenant?Object(y.jsx)("div",{className:"container ",children:Object(y.jsxs)("div",{className:"content is-medium",children:[Object(y.jsx)("p",{children:Object(y.jsx)(S,{tenant:s.tenant,handleUpdateTenant:N,dispatch:c})}),Object(y.jsx)("p",{children:s.alert.show&&i}),Object(y.jsx)("p",{children:Object(y.jsx)(C.Provider,{value:{dispatch:c,handleDeleteTenant:p},children:Object(y.jsx)(D,{tenants:s.tenants})})})]})}):s.onAddTenant?Object(y.jsx)("div",{className:"container ",children:Object(y.jsxs)("div",{className:"content is-medium",children:[Object(y.jsx)("p",{children:Object(y.jsx)(A,{handleCreateTenant:x,dispatch:c})}),Object(y.jsx)("p",{children:s.alert.show&&i}),Object(y.jsx)("p",{children:Object(y.jsx)(C.Provider,{value:{dispatch:c,handleDeleteTenant:p},children:Object(y.jsx)(D,{tenants:s.tenants})})})]})}):s.onViewTenant&&null!=s.tenant?Object(y.jsx)("div",{className:"container",children:Object(y.jsx)("div",{className:"content is-medium",children:Object(y.jsx)("p",{children:Object(y.jsx)(C.Provider,{value:{dispatch:c,handleDeleteTenant:p},children:Object(y.jsx)(P,{tenant:s.tenant})})})})}):Object(y.jsx)("div",{className:"container ",children:Object(y.jsxs)("div",{className:"content is-medium",children:[Object(y.jsx)("p",{children:Object(y.jsx)("button",{className:"button is-outline",onClick:function(){c({type:"HandleOnAddTenant"})},children:"+ Add Tenant"})}),Object(y.jsx)("p",{children:s.alert.show&&i}),Object(y.jsx)("p",{children:Object(y.jsx)(C.Provider,{value:{dispatch:c,handleDeleteTenant:p},children:Object(y.jsx)(D,{tenants:s.tenants})})})]})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var I=document.getElementById("initial-props").getAttribute("data-json"),L=JSON.parse(decodeURI(I));m.a.hydrate(Object(y.jsx)(R,Object(i.a)({},L)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[19,1,2]]]);
//# sourceMappingURL=main.3793551a.chunk.js.map